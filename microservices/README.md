# Архитектура микросервисов для системы закупок

## Обзор архитектуры

Система разделена на следующие микросервисы:

### 1. **API Gateway** (`gateway/`)
- Единая точка входа для всех запросов
- Маршрутизация запросов к микросервисам
- Аутентификация и авторизация
- Rate limiting и кэширование
- Логирование и мониторинг

### 2. **Data Service** (`data-service/`)
- Управление данными о товарах, продажах, остатках
- Кэширование данных
- Синхронизация с внешними API
- Валидация и очистка данных

### 3. **Forecast Service** (`forecast-service/`)
- Расчет прогнозов закупок
- ML-модели для улучшения прогнозирования
- Анализ трендов и сезонности
- Генерация рекомендаций

### 4. **Notification Service** (`notification-service/`)
- Отправка уведомлений в Telegram
- Управление подписками
- Шаблоны сообщений
- История уведомлений

### 5. **Monitoring Service** (`monitoring-service/`)
- Мониторинг здоровья API
- Сбор метрик производительности
- Алерты и уведомления
- Дашборды и отчеты

### 6. **Storage Service** (`storage-service/`)
- Управление Google Sheets
- Экспорт данных
- Резервное копирование
- Управление файлами

## Технологический стек

- **API Gateway**: FastAPI + Nginx
- **Микросервисы**: FastAPI + SQLAlchemy
- **База данных**: PostgreSQL + Redis
- **Очереди сообщений**: RabbitMQ
- **Мониторинг**: Prometheus + Grafana
- **Контейнеризация**: Docker + Docker Compose
- **Оркестрация**: Kubernetes (опционально)

## Структура проекта

```
microservices/
├── gateway/                 # API Gateway
├── data-service/           # Сервис данных
├── forecast-service/       # Сервис прогнозирования
├── notification-service/   # Сервис уведомлений
├── monitoring-service/     # Сервис мониторинга
├── storage-service/        # Сервис хранения
├── shared/                # Общие компоненты
├── docker-compose.yml     # Конфигурация Docker
└── k8s/                   # Kubernetes манифесты
```

## Принципы архитектуры

1. **Разделение ответственности**: Каждый сервис отвечает за одну область
2. **Независимость развертывания**: Сервисы можно развертывать независимо
3. **Отказоустойчивость**: Сбой одного сервиса не влияет на другие
4. **Масштабируемость**: Каждый сервис можно масштабировать отдельно
5. **Технологическая гибкость**: Разные сервисы могут использовать разные технологии 